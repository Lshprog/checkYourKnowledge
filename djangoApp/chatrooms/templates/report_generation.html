{% extends "base.html" %}
{% block title %}Student report{% endblock %}
{% load static %}

{% block content %}
    <h1 class="center">Student Report</h1>

    <div class="student-info">
        <h2>{{ user.name }}</h2>
        <p>Last Name: {{ user.lastName }}</p>
        <p>First Name: {{ user.firstName }}</p>
        <img src="{{ user.avatarLink }}" alt="Avatar" width="120" height="120">
    </div>

    <ul class="answers-list">
        {% for answer in answers_list %}
            <li>{{ answer.task_id }} - Points: {{ answer.answer_points }} / {{ answer.max_points }}</li>
        {% endfor %}
    </ul>

    <hr>

    <p class="total">Total points: <span id="total-points"></span></p>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            // Get the answers dictionary from your Django template
            const answersDict = {{ answers_list|safe }};

            let totalPoints = 0;

            answersDict.forEach(function(item) {

                totalPoints += parseInt(item['answer_points']);
            });
            // Update the total points element
            const totalPointsElement = document.getElementById('total-points');
            totalPointsElement.textContent = totalPoints.toString();
        });
    </script>

{% endblock %}
